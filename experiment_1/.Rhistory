}
# ----------------------------------
#     Table for Utility Models
# ----------------------------------
tab1 <- make_ci_tab(fe_logit_u1,add_var_name = TRUE)[-1,]
tab2 <- make_ci_tab(fe_logit_c1,add_var_name = TRUE)[-1,]
tab3 <- make_ci_tab(fe_logit_a1,add_var_name = TRUE)[-1,]
unique_rows <- union(rownames(tab2),rownames(tab3))
empty_df1 <- data.frame(var_name = unique_rows)
empty_df <- data.frame(var_name = unique_rows)
merge(tab1, empty_df, by = "var_name", all = TRUE)
merge(tab1, empty_df, by = "var_name", all.x = TRUE)
merge(tab1, empty_df, by = "var_name", all.y = TRUE)
merge(tab1, empty_df, by = "var_name", all = TRUE)
unique_rows
merge(empty_df, tab1, by = "var_name", all = TRUE)
empty_df
merge(empty_df, tab1, by = "var_name", all = TRUE)
tab1_adj <- merge(empty_df, tab1, by = "var_name", all = TRUE)
tab_adj
tab1_adj <- merge(empty_df, tab1, by = "var_name", all = TRUE)
tab1_adj
tab1_adj <- merge(empty_df, tab1, by = "var_name", all.x = TRUE)
tab1_adj
tab1_adj <- merge(empty_df, tab1, by = "var_name", all = TRUE)
tab1_adj
tab1
tab1
tab1_adj <- merge(empty_df, tab1, by = "var_name", all = TRUE)
tab1_adj
tab1_adj <- left_join(empty_df, tab1, by = "var_name", all = TRUE)
tab1_adj <- left_join(empty_df, tab1, by = "var_name")
tab1_adj
empty_df
unique_rows <- union(rownames(tab2),rownames(tab3))
empty_df <- data.frame(var_name = unique_rows)
tab1_adj <- left_join(empty_df, tab1, by = "var_name")
tab1_adj <- left_join(empty_df, tab1, by = "var_name")
tab2_adj <- left_join(empty_df, tab2, by = "var_name")
tab3_adj <- left_join(empty_df, tab3, by = "var_name")
cbind(tab1,tab2,tab3)
union_rows <- union(rownames(tab2),rownames(tab3))
empty_df <- data.frame(var_name = union_rows)
union_rows <- data.frame(var_name = union(rownames(tab2),rownames(tab3)))
tab1_adj <- left_join(union_rows, tab1, by = "var_name")
tab2_adj <- left_join(union_rows, tab2, by = "var_name")
tab3_adj <- left_join(union_rows, tab3, by = "var_name")
cbind(tab1_adj,tab2_adj,tab3_adj)
tab_mod_a <- cbind(tab1_adj,tab2_adj,tab3_adj)
rownames(tab_mod_a)
rownames(tab_mod_a) = tab_mod_a$var_name
tab_mod_a <- tab_mod_a[-1,]
tab_mod_a
tab_mod_a <- tab_mod_a[,-1]
tab_mod_a
tab_mod_a <- cbind(tab1_adj,tab2_adj,tab3_adj)
tab_mod_a <- tab_mod_a[-1,]
tab_mod_a
tab_mod_a <- tab_mod_a[,-1]
tab_mod_a
tab1_adj[,-1]
tab1_adj <- left_join(union_rows, tab1, by = "var_name")[,-1]
tab2_adj <- left_join(union_rows, tab2, by = "var_name")[,-1]
tab3_adj <- left_join(union_rows, tab3, by = "var_name")[,-1]
tab_mod_a <- cbind(tab1_adj,tab2_adj,tab3_adj)
tab1_adj <- left_join(union_rows, tab1, by = "var_name")
tab2_adj <- left_join(union_rows, tab2, by = "var_name")[,-1]
tab3_adj <- left_join(union_rows, tab3, by = "var_name")[,-1]
tab_mod_a <- cbind(tab1_adj,tab2_adj,tab3_adj)
mod_row_names <- union(rownames(tab2),rownames(tab3))
union_rows <- data.frame(var_name = mod_row_names)
tab1_adj <- left_join(union_rows, tab1, by = "var_name")[,-1]
tab2_adj <- left_join(union_rows, tab2, by = "var_name")[,-1]
tab3_adj <- left_join(union_rows, tab3, by = "var_name")[,-1]
mod_row_names <- union(rownames(tab2),rownames(tab3))
union_rows <- data.frame(var_name = mod_row_names)
tab1_adj <- left_join(union_rows, tab1, by = "var_name")[,-1]
tab2_adj <- left_join(union_rows, tab2, by = "var_name")[,-1]
tab3_adj <- left_join(union_rows, tab3, by = "var_name")[,-1]
tab_mod_a <- cbind(tab1_adj,tab2_adj,tab3_adj)
rownames(tab_mod_a) <- mod_row_names
tab_mod_a
rownames(tab_mod_a)
# ----------------------------------
#     Table for Utility Models
# ----------------------------------
var_name_immed_u <- c('$u(M)$',
'$u(X_v)$',
'$\\textbf{1}\\{X_f = 7\\}$',
'$\\textbf{1}\\{X_f = 9\\}$',
'$\\textbf{1}\\{T = 9\\}$',
'$\\textbf{1}\\{T = 18\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{X_f = 7\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{X_f = 9\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{T = 9\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{T = 18\\}$',
'$\\textbf{1}\\{M = 12\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{M = 12\\}$')
# Panel A: Immed_Rw_Vary
tab1 <- make_ci_tab(fe_logit_u1,add_var_name = TRUE)[-1,]
tab2 <- make_ci_tab(fe_logit_c1,add_var_name = TRUE)[-1,]
tab3 <- make_ci_tab(fe_logit_a1,add_var_name = TRUE)[-1,]
mod_row_names <- union(rownames(tab2),rownames(tab3))
union_rows <- data.frame(var_name = mod_row_names)
tab1_adj <- left_join(union_rows, tab1, by = "var_name")[,-1]
tab2_adj <- left_join(union_rows, tab2, by = "var_name")[,-1]
tab3_adj <- left_join(union_rows, tab3, by = "var_name")[,-1]
tab_mod_a <- cbind(tab1_adj,tab2_adj,tab3_adj)
rownames(tab_mod_a) <- mod_row_names
union_rows <- data.frame(var_name = union(rownames(tab2),rownames(tab3)))
tab1_adj <- left_join(union_rows, tab1, by = "var_name")[,-1]
tab2_adj <- left_join(union_rows, tab2, by = "var_name")[,-1]
tab3_adj <- left_join(union_rows, tab3, by = "var_name")[,-1]
tab_mod_a <- cbind(tab1_adj,tab2_adj,tab3_adj)
rownames(tab_mod_a) <- var_name_immed_u
tab_mod_a
remove(tab1,tab2,tab3,tab1_adj,tab2_adj,tab3_adj)
row_mod <- sprintf(" & \\multicolumn{2}{c}{%s} & \\multicolumn{2}{c}{%s} & \\multicolumn{2}{c}{%s} \\\\",
"(3) Utility model",
"(4) Censored data",
"(5) Add interation")
row_mod <- sprintf(" & \\multicolumn{2}{c}{%s} & \\multicolumn{2}{c}{%s} & \\multicolumn{2}{c}{%s} \\\\",
"(3) Utility model",
"(4) Censored data",
"(5) Add interation")
row_name <- "& Coef & 95\\% CI & Coef & 95\\% CI & Coef & 95\\% CI \\\\"
row_obs <- sprintf("\\hline observations & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} \\\\",
nrow(df_time_immed),
nrow(df_censor_immed),
nrow(df_time_immed))
addtorow <- list()
addtorow$pos <- list(0,0,nrow(tab_baseline_a))
addtorow$command  <- as.vector(c(row_mod,row_name,row_obs),mode='character')
write_reg_tab('./tables/utility_A.tex',tab_mod_a,
var_name=var_name_immed_u,
document=write_document,
addtorow = addtorow)
addtorow$pos <- list(0,0,nrow(tab_mod_a))
addtorow$command  <- as.vector(c(row_mod,row_name,row_obs),mode='character')
write_reg_tab('./tables/utility_A.tex',tab_mod_a,
var_name=var_name_immed_u,
document=write_document,
addtorow = addtorow)
write_reg_tab <- function(filename,
tab,var_name = NULL,
document = FALSE,
output = TRUE,
addtorow = NULL){
begin_doc <- "%\n\\documentclass[12pt]{article}\n \\begin{document}"
end_doc <- '\\end{document}'
if(!is.null(var_name)){
rownames(tab) <- var_name
}
table <- xtable(tab)
align(table) <- rep('c',ncol(tab)+1)
reg_table <-print.xtable(table,
#hline.after = c(-1, 0, nrow(tab)),
#table.placement = "h",
floating = FALSE,
sanitize.text.function = function(x) {x},
include.colnames = FALSE,
add.to.row = addtorow)
if(document == TRUE){
reg_table <- paste0(begin_doc,str_split(reg_table, '\n', n = 2)[[1]][2],end_doc)
}
if(output == TRUE){
write(reg_table, file = filename)
}
}
# ----------------------------------
#         Baseline Table
# ----------------------------------
var_name_immed <- c('$M$',
'$X_v$',
'$\\textbf{1}\\{X_f = 7\\}$',
'$\\textbf{1}\\{X_f = 9\\}$',
'$\\textbf{1}\\{T = 9\\}$',
'$\\textbf{1}\\{T = 18\\}$',
'$X_v\\cdot\\textbf{1}\\{X_f = 7\\}$',
'$X_v\\cdot\\textbf{1}\\{X_f = 9\\}$',
'$X_v\\cdot\\textbf{1}\\{T = 9\\}$',
'$X_v\\cdot\\textbf{1}\\{T = 18\\}$')
var_name_delayed <- c('$M$',
'$X_v$',
'$\\textbf{1}\\{X_f = 7\\}$',
'$\\textbf{1}\\{X_f = 9\\}$',
'$X_v\\cdot\\textbf{1}\\{X_f = 7\\}$',
'$X_v\\cdot\\textbf{1}\\{X_f = 9\\}$')
# Panel A: Immed_Rw_Vary
firth_result_immed <- read.csv('firth_result_immed.csv')[,-1]
tab1 <- make_ci_tab(fe_logit1)[-1,]
tab2 <- make_ci_tab(firth_result_immed)
tab_baseline_a <- cbind(tab1,tab2)
remove(tab1,tab2)
row_mod <- sprintf(" & \\multicolumn{2}{c}{%s} & \\multicolumn{2}{c}{%s} \\\\",
"(1) Logit model",
"(2) Firth's model")
row_name <- "& Coef & 95\\% CI & Coef & 95\\% CI \\\\"
row_obs <- sprintf("\\hline observations & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} \\\\",
nrow(df_time_immed),
nrow(df_time_immed))
addtorow <- list()
addtorow$pos <- list(0,0,nrow(tab_baseline_a))
addtorow$command  <- as.vector(c(row_mod,row_name,row_obs),mode='character')
write_reg_tab('./tables/baseline_A.tex',tab_baseline_a,
var_name=var_name_immed,
document=write_document,
addtorow = addtorow)
# Panel B: Delayed_Rw_Vary
firth_result_delayed <- read.csv('firth_result_delayed.csv')[,-1]
tab1 <- make_ci_tab(fe_logit2)[-1,]
tab2 <- make_ci_tab(firth_result_delayed)
tab_baseline_b <- cbind(tab1,tab2)
remove(tab1,tab2)
row_obs <- sprintf("\\hline observations & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} \\\\",
nrow(df_time_delayed),
nrow(df_time_delayed))
addtorow <- list()
addtorow$pos <- list(0,0,nrow(tab_baseline_b))
addtorow$command  <- as.vector(c(row_mod,row_name,row_obs),mode='character')
write_reg_tab('./tables/baseline_B.tex',tab_baseline_b,
var_name=var_name_delayed,
document=write_document,
addtorow = addtorow)
# ----------------------------------
#     Table for Utility Models
# ----------------------------------
var_name_immed_u <- c('$u(M)$',
'$u(X_v)$',
'$\\textbf{1}\\{X_f = 7\\}$',
'$\\textbf{1}\\{X_f = 9\\}$',
'$\\textbf{1}\\{T = 9\\}$',
'$\\textbf{1}\\{T = 18\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{X_f = 7\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{X_f = 9\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{T = 9\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{T = 18\\}$',
'$\\textbf{1}\\{M = 12\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{M = 12\\}$')
# Panel A: Immed_Rw_Vary
tab1 <- make_ci_tab(fe_logit_u1,add_var_name = TRUE)[-1,]
tab2 <- make_ci_tab(fe_logit_c1,add_var_name = TRUE)[-1,]
tab3 <- make_ci_tab(fe_logit_a1,add_var_name = TRUE)[-1,]
union_rows <- data.frame(var_name = union(rownames(tab2),rownames(tab3)))
tab1_adj <- left_join(union_rows, tab1, by = "var_name")[,-1]
tab2_adj <- left_join(union_rows, tab2, by = "var_name")[,-1]
tab3_adj <- left_join(union_rows, tab3, by = "var_name")[,-1]
tab_mod_a <- cbind(tab1_adj,tab2_adj,tab3_adj)
rownames(tab_mod_a) <- var_name_immed_u
remove(tab1,tab2,tab3,tab1_adj,tab2_adj,tab3_adj)
row_mod <- sprintf(" & \\multicolumn{2}{c}{%s} & \\multicolumn{2}{c}{%s} & \\multicolumn{2}{c}{%s} \\\\",
"(3) Utility model",
"(4) Censored data",
"(5) Add interation")
row_name <- "& Coef & 95\\% CI & Coef & 95\\% CI & Coef & 95\\% CI \\\\"
row_obs <- sprintf("\\hline observations & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} \\\\",
nrow(df_time_immed),
nrow(df_censor_immed),
nrow(df_time_immed))
addtorow <- list()
addtorow$pos <- list(0,0,nrow(tab_mod_a))
addtorow$command  <- as.vector(c(row_mod,row_name,row_obs),mode='character')
write_reg_tab('./tables/utility_A.tex',tab_mod_a,
var_name=var_name_immed_u,
document=write_document,
addtorow = addtorow)
write_reg_tab <- function(filename,
tab,var_name = NULL,
document = FALSE,
output = TRUE,
addtorow = NULL){
begin_doc <- "%\n\\documentclass[12pt]{article}\n \\begin{document}"
end_doc <- '\\end{document}'
if(!is.null(var_name)){
rownames(tab) <- var_name
}
table <- xtable(tab)
align(table) <- c('l',rep('c',ncol(tab)))
reg_table <-print.xtable(table,
#hline.after = c(-1, 0, nrow(tab)),
#table.placement = "h",
floating = FALSE,
sanitize.text.function = function(x) {x},
include.colnames = FALSE,
add.to.row = addtorow)
if(document == TRUE){
reg_table <- paste0(begin_doc,str_split(reg_table, '\n', n = 2)[[1]][2],end_doc)
}
if(output == TRUE){
write(reg_table, file = filename)
}
}
write_reg_tab('./tables/baseline_A.tex',tab_baseline_a,
var_name=var_name_immed,
document=write_document,
addtorow = addtorow)
# Panel A: Immed_Rw_Vary
firth_result_immed <- read.csv('firth_result_immed.csv')[,-1]
tab1 <- make_ci_tab(fe_logit1)[-1,]
tab2 <- make_ci_tab(firth_result_immed)
tab_baseline_a <- cbind(tab1,tab2)
remove(tab1,tab2)
row_mod <- sprintf(" & \\multicolumn{2}{c}{%s} & \\multicolumn{2}{c}{%s} \\\\",
"(1) Logit model",
"(2) Firth's model")
row_name <- "& Coef & 95\\% CI & Coef & 95\\% CI \\\\"
row_obs <- sprintf("\\hline observations & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} \\\\",
nrow(df_time_immed),
nrow(df_time_immed))
addtorow <- list()
addtorow$pos <- list(0,0,nrow(tab_baseline_a))
addtorow$command  <- as.vector(c(row_mod,row_name,row_obs),mode='character')
write_reg_tab('./tables/baseline_A.tex',tab_baseline_a,
var_name=var_name_immed,
document=write_document,
addtorow = addtorow)
# Panel B: Delayed_Rw_Vary
firth_result_delayed <- read.csv('firth_result_delayed.csv')[,-1]
tab1 <- make_ci_tab(fe_logit2)[-1,]
tab2 <- make_ci_tab(firth_result_delayed)
tab_baseline_b <- cbind(tab1,tab2)
remove(tab1,tab2)
row_obs <- sprintf("\\hline observations & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} \\\\",
nrow(df_time_delayed),
nrow(df_time_delayed))
addtorow <- list()
addtorow$pos <- list(0,0,nrow(tab_baseline_b))
addtorow$command  <- as.vector(c(row_mod,row_name,row_obs),mode='character')
write_reg_tab('./tables/baseline_B.tex',tab_baseline_b,
var_name=var_name_delayed,
document=write_document,
addtorow = addtorow)
# ----------------------------------
#     Table for Utility Models
# ----------------------------------
var_name_immed_u <- c('$u(M)$',
'$u(X_v)$',
'$\\textbf{1}\\{X_f = 7\\}$',
'$\\textbf{1}\\{X_f = 9\\}$',
'$\\textbf{1}\\{T = 9\\}$',
'$\\textbf{1}\\{T = 18\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{X_f = 7\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{X_f = 9\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{T = 9\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{T = 18\\}$',
'$\\textbf{1}\\{M = 12\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{M = 12\\}$')
# Panel A: Immed_Rw_Vary
tab1 <- make_ci_tab(fe_logit_u1,add_var_name = TRUE)[-1,]
tab2 <- make_ci_tab(fe_logit_c1,add_var_name = TRUE)[-1,]
tab3 <- make_ci_tab(fe_logit_a1,add_var_name = TRUE)[-1,]
union_rows <- data.frame(var_name = union(rownames(tab2),rownames(tab3)))
tab1_adj <- left_join(union_rows, tab1, by = "var_name")[,-1]
tab2_adj <- left_join(union_rows, tab2, by = "var_name")[,-1]
tab3_adj <- left_join(union_rows, tab3, by = "var_name")[,-1]
tab_mod_a <- cbind(tab1_adj,tab2_adj,tab3_adj)
rownames(tab_mod_a) <- var_name_immed_u
remove(tab1,tab2,tab3,tab1_adj,tab2_adj,tab3_adj)
row_mod <- sprintf(" & \\multicolumn{2}{c}{%s} & \\multicolumn{2}{c}{%s} & \\multicolumn{2}{c}{%s} \\\\",
"(3) Utility model",
"(4) Censored data",
"(5) Add interation")
row_name <- "& Coef & 95\\% CI & Coef & 95\\% CI & Coef & 95\\% CI \\\\"
row_obs <- sprintf("\\hline observations & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} \\\\",
nrow(df_time_immed),
nrow(df_censor_immed),
nrow(df_time_immed))
addtorow <- list()
addtorow$pos <- list(0,0,nrow(tab_mod_a))
addtorow$command  <- as.vector(c(row_mod,row_name,row_obs),mode='character')
write_reg_tab('./tables/utility_A.tex',tab_mod_a,
var_name=var_name_immed_u,
document=write_document,
addtorow = addtorow)
write_reg_tab <- function(filename,
tab,var_name = NULL,
document = FALSE,
output = TRUE,
addtorow = NULL){
begin_doc <- "%\n\\documentclass[12pt]{article}\n \\begin{document}"
end_doc <- '\\end{document}'
if(!is.null(var_name)){
rownames(tab) <- var_name
}
table <- xtable(tab)
align(table) <- c('l',rep('c',ncol(tab)))
reg_table <-print.xtable(table,
#hline.after = c(-1, 0, nrow(tab)),
#table.placement = "h",
#floating = FALSE,
floating.environment = "sidewaystable",
sanitize.text.function = function(x) {x},
include.colnames = FALSE,
add.to.row = addtorow)
if(document == TRUE){
reg_table <- paste0(begin_doc,str_split(reg_table, '\n', n = 2)[[1]][2],end_doc)
}
if(output == TRUE){
write(reg_table, file = filename)
}
}
write_reg_tab <- function(filename,
tab,var_name = NULL,
document = FALSE,
output = TRUE,
addtorow = NULL){
begin_doc <- "%\n\\documentclass[12pt]{article}\n \\begin{document}"
end_doc <- '\\end{document}'
if(!is.null(var_name)){
rownames(tab) <- var_name
}
table <- xtable(tab)
align(table) <- c('l',rep('c',ncol(tab)))
reg_table <-print.xtable(table,
#hline.after = c(-1, 0, nrow(tab)),
#table.placement = "h",
floating = FALSE,
sanitize.text.function = function(x) {x},
include.colnames = FALSE,
add.to.row = addtorow)
if(document == TRUE){
reg_table <- paste0(begin_doc,str_split(reg_table, '\n', n = 2)[[1]][2],end_doc)
}
if(output == TRUE){
write(reg_table, file = filename)
}
}
logit_a1
logit_a1$aic
row_aic <- sprintf("\\hline AIC & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} \\\\",
logit_u1$aic,
logit_c1$aic,
logit_a1$aic)
row_aic <- sprintf("\\hline AIC & \\multicolumn{2}{c}{%f} & \\multicolumn{2}{c}{%f} & \\multicolumn{2}{c}{%f} \\\\",
logit_u1$aic,
logit_c1$aic,
logit_a1$aic)
addtorow <- list()
addtorow$pos <- list(0,0,nrow(tab_mod_a),nrow(tab_mod_a))
addtorow$command  <- as.vector(c(row_mod,row_name,row_obs,row_aic),mode='character')
write_reg_tab('./tables/utility_A.tex',tab_mod_a,
var_name=var_name_immed_u,
document=write_document,
addtorow = addtorow)
row_aic <- sprintf("\\hline AIC & \\multicolumn{2}{c}{%.2f} & \\multicolumn{2}{c}{%.2f} & \\multicolumn{2}{c}{%.2f} \\\\",
logit_u1$aic,
logit_c1$aic,
logit_a1$aic)
addtorow <- list()
addtorow$pos <- list(0,0,nrow(tab_mod_a),nrow(tab_mod_a))
addtorow$command  <- as.vector(c(row_mod,row_name,row_obs,row_aic),mode='character')
write_reg_tab('./tables/utility_A.tex',tab_mod_a,
var_name=var_name_immed_u,
document=write_document,
addtorow = addtorow)
row_aic <- sprintf("AIC & \\multicolumn{2}{c}{%.2f} & \\multicolumn{2}{c}{%.2f} & \\multicolumn{2}{c}{%.2f} \\\\",
logit_u1$aic,
logit_c1$aic,
logit_a1$aic)
addtorow <- list()
addtorow$pos <- list(0,0,nrow(tab_mod_a),nrow(tab_mod_a))
addtorow$command  <- as.vector(c(row_mod,row_name,row_obs,row_aic),mode='character')
write_reg_tab('./tables/utility_A.tex',tab_mod_a,
var_name=var_name_immed_u,
document=write_document,
addtorow = addtorow)
# Panel A: Delayed_Rw_Vary
tab1 <- make_ci_tab(fe_logit_u2,add_var_name = TRUE)[-1,]
tab2 <- make_ci_tab(fe_logit_c2,add_var_name = TRUE)[-1,]
tab3 <- make_ci_tab(fe_logit_a2,add_var_name = TRUE)[-1,]
union_rows <- data.frame(var_name = union(rownames(tab2),rownames(tab3)))
tab1_adj <- left_join(union_rows, tab1, by = "var_name")[,-1]
tab2_adj <- left_join(union_rows, tab2, by = "var_name")[,-1]
tab3_adj <- left_join(union_rows, tab3, by = "var_name")[,-1]
tab_mod_b <- cbind(tab1_adj,tab2_adj,tab3_adj)
union_rows
var_name_delayed_u <- c('$u(M)$',
'$u(X_v)$',
'$\\textbf{1}\\{X_f = 7\\}$',
'$\\textbf{1}\\{X_f = 9\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{X_f = 7\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{X_f = 9\\}$',
'$\\textbf{1}\\{M = 12\\}$',
'$u(X_v)\\cdot\\textbf{1}\\{M = 12\\}$')
union_rows <- data.frame(var_name = union(rownames(tab2),rownames(tab3)))
tab1_adj <- left_join(union_rows, tab1, by = "var_name")[,-1]
tab2_adj <- left_join(union_rows, tab2, by = "var_name")[,-1]
tab3_adj <- left_join(union_rows, tab3, by = "var_name")[,-1]
tab_mod_b <- cbind(tab1_adj,tab2_adj,tab3_adj)
rownames(tab_mod_b) <- var_name_delayed_u
remove(tab1,tab2,tab3,tab1_adj,tab2_adj,tab3_adj)
row_mod <- sprintf(" & \\multicolumn{2}{c}{%s} & \\multicolumn{2}{c}{%s} & \\multicolumn{2}{c}{%s} \\\\",
"(3) Utility model",
"(4) Censored data",
"(5) Add interation")
row_name <- "& Coef & 95\\% CI & Coef & 95\\% CI & Coef & 95\\% CI \\\\"
row_obs <- sprintf("\\hline observations & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} & \\multicolumn{2}{c}{%d} \\\\",
nrow(df_time_delayed),
nrow(df_censor_delayed),
nrow(df_time_delayed))
row_aic <- sprintf("AIC & \\multicolumn{2}{c}{%.2f} & \\multicolumn{2}{c}{%.2f} & \\multicolumn{2}{c}{%.2f} \\\\",
logit_u2$aic,
logit_c2$aic,
logit_a2$aic)
addtorow <- list()
addtorow$pos <- list(0,0,nrow(tab_mod_b),nrow(tab_mod_b))
addtorow$command  <- as.vector(c(row_mod,row_name,row_obs,row_aic),mode='character')
write_reg_tab('./tables/utility_B.tex',tab_mod_b,
var_name=var_name_delayed_u,
document=write_document,
addtorow = addtorow)
source("E:/Attention_discounting/attention_discount_project/experiment_1/make_fig_tab.R")
